import{_ as l,d as a,x as t,e,g as n,f as o,o as s,c as i,b as d,F as u,r,n as c,u as p,t as b,w as m,y as v,z as y,A as h,p as f,a as g,B as x,C as k}from"./index.50b946d4.js";import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js";import"https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js";const w=l=>(f("data-v-02931955"),l=l(),g(),l),D=w((()=>d("button",{type:"button",class:"btn btn-primary m-3","data-bs-toggle":"modal","data-bs-target":"#dateModal"},"+",-1))),_={class:"table-responsive m-3"},C={class:"table table-sm table-bordered caption-top"},j=w((()=>d("th",{scope:"col"},"日期",-1))),E=w((()=>d("th",null,"总计",-1))),M=["onClick"],S=w((()=>d("td",{class:"bg-body-secondary",style:{color:"#0a58ca"}},"合计",-1))),O={class:"bg-body-secondary",style:{color:"#0a58ca"}},$={class:"bg-body-secondary",style:{color:"#0a58ca"}},B={class:"modal fade",id:"dateModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","data-backdrop":"static","aria-hidden":"true"},I={class:"modal-dialog"},T={class:"modal-content"},A=w((()=>d("div",{class:"modal-header"},[d("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"添加日期"),d("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),L={class:"modal-body"},U=["disabled"],V={class:"input-group mb-3"},F={type:"button",class:"btn btn-outline-secondary"},J={class:"mr-3",style:{display:"inline-block","text-align":"center",width:"2em"}},N=["onUpdate:modelValue"],z={class:"modal-footer"},P=w((()=>d("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)));var X=l(a({__name:"TableData",props:{allData:null,summation:null},setup(l){const a=l,{allData:f,summation:g}=t(a),x=y("categorys"),k=e();n((()=>{k.value=new bootstrap.Modal(document.getElementById("dateModal"),{keyboard:!1})}));const w=o((()=>f.value.sort(((l,a)=>new Date(l.date).getTime()-new Date(a.date).getTime())))),X=e({date:null,food:null,clothes:null,entertainment:null,traffic:null,daily:null,others:null,allin:null}),q=e(!1),G=e(),H=()=>{if(!X.value.date)return;let l=Q(X.value);R(l),f.value.push(l),k.value.hide()},K=()=>{let l=h(f.value,G.value);l.value=Q(X.value),R(l),G.value=void 0,k.value.hide()};function Q(l){return JSON.parse(JSON.stringify(l))}function R(l){(l=p(l)).allin=l.allin=Object.keys(l).reduce(((a,t)=>"date"!==t&&"allin"!==t?a+l[t]:a),0)}return n((function(){[["dateModal",X]].forEach((([l,a])=>{document.getElementById(l).addEventListener("hidden.bs.modal",(()=>{X.value={date:null,food:null,clothes:null,entertainment:null,traffic:null,daily:null,others:null,allin:null},q.value=!1}))}))})),(l,a)=>(s(),i("div",null,[D,d("div",_,[d("table",C,[d("thead",null,[d("tr",null,[j,(s(!0),i(u,null,r(p(x),(l=>(s(),i("th",null,[d("i",{class:c(l.icon),style:{color:"#0d6efd"}},null,2)])))),256)),E])]),d("tbody",null,[(s(!0),i(u,null,r(p(w),((l,a)=>(s(),i("tr",{onClick:t=>((l,a)=>{q.value=!0,X.value=Q(l),G.value=a,k.value.show()})(l,a)},[d("td",null,b(l.date),1),(s(!0),i(u,null,r(p(x),((a,t)=>(s(),i("td",null,b(l[a.prop]),1)))),256)),d("td",null,b(l.allin),1)],8,M)))),256)),d("tr",null,[S,(s(!0),i(u,null,r(p(x),((l,a)=>(s(),i("td",O,b(p(g)[l.prop]),1)))),256)),d("td",$,b(p(g).allin),1)])])])]),d("div",B,[d("div",I,[d("div",T,[A,d("div",L,[m(d("input",{type:"date",class:"form-control mb-3",disabled:q.value,"onUpdate:modelValue":a[0]||(a[0]=l=>X.value.date=l)},null,8,U),[[v,X.value.date]]),(s(!0),i(u,null,r(p(x),(l=>(s(),i("div",V,[d("button",F,[d("i",{class:c(l.icon)},null,2),d("div",J,b(l.label),1)]),m(d("input",{type:"number",class:"form-control","onUpdate:modelValue":a=>X.value[l.prop]=a,"aria-label":"Text input with segmented dropdown button"},null,8,N),[[v,X.value[l.prop]]])])))),256))]),d("div",z,[P,q.value?(s(),i("button",{key:1,type:"button",class:"btn btn-primary",onClick:K},"确定")):(s(),i("button",{key:0,type:"button",class:"btn btn-primary",onClick:H},"添加"))])])])])]))}}),[["__scopeId","data-v-02931955"]]);const q=l=>(f("data-v-6432d702"),l=l(),g(),l),G=q((()=>d("div",{id:"dailySpend",class:"chart"},null,-1))),H=q((()=>d("div",{id:"typeSpend",class:"chart"},null,-1)));var K=l(a({__name:"TableCharts",props:{allData:null,summation:null},setup(l){const a=l,t=y("categorys");let e=t.map((({prop:l,label:t})=>({name:t,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:a.allData.map((({[l]:a})=>a))}))),o=t.map((({prop:l,label:t})=>({name:t,value:a.summation[l],label:{show:!0}})));const d=[{dom:"dailySpend",ctx:null,option:{title:{text:"概览",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"0"},xAxis:{type:"category",data:a.allData.map((({date:l})=>l))},yAxis:{type:"value"},grid:{left:"3%",right:"4%",bottom:"8%",containLabel:!0},series:e}},{dom:"typeSpend",ctx:null,option:{title:{text:"类别消费统计",left:"center",top:"10%"},tooltip:{show:!0,formatter:({name:l,value:a,percent:t})=>`${l}-${a} (${t}%)`},series:[{name:"Access From",type:"pie",radius:"50%",label:{show:!0,formatter:({name:l,value:a,percent:t})=>`${l}-${a} (${t}%)`},data:o,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}];return n((()=>{d.forEach((l=>{let a=document.getElementById(l.dom);l.ctx=echarts.init(a),l.ctx.setOption(l.option,!0)}))})),(l,a)=>(s(),i(u,null,[G,H],64))}}),[["__scopeId","data-v-6432d702"]]);const Q={class:"container py-3"},R={class:"nav nav-tabs"},W=["onClick"],Y=a({__name:"index",setup(l){const a=e([]),t=o((()=>a.value.reduce(((l,a)=>(Object.keys(l).forEach((t=>{"date"!==t&&(l[t]+=a[t])})),l)),{date:null,food:null,clothes:null,entertainment:null,traffic:null,daily:null,others:null,allin:null}))),n=e([{label:"数据记录表",prop:"table"},{label:"统计",prop:"statistic"}]),m=e("table");const v=e();return k("categorys",[{label:"吃",prop:"food",icon:"bi bi-cake2-fill"},{label:"穿",prop:"clothes",icon:"bi bi-incognito"},{label:"娱乐",prop:"entertainment",icon:"bi bi-controller"},{label:"交通",prop:"traffic",icon:"bi bi-car-front-fill"},{label:"日用",prop:"daily",icon:"bi bi-calendar"},{label:"其他",prop:"others",icon:"bi bi-alipay"}]),(l,e)=>(s(),i("div",Q,[d("ul",R,[(s(!0),i(u,null,r(n.value,(l=>(s(),i("li",{class:"nav-item",onClick:a=>{return t=l.prop,void(m.value=t);var t}},[d("a",{class:c({"nav-link":!0,active:m.value==l.prop}),"aria-current":"page"},b(l.label),3)],8,W)))),256))]),"table"===m.value?(s(),x(X,{key:0,allData:a.value,"onUpdate:allData":e[0]||(e[0]=l=>a.value=l),summation:p(t),ref_key:"tableComp",ref:v},null,8,["allData","summation"])):(s(),x(K,{key:1,allData:a.value,summation:p(t)},null,8,["allData","summation"]))]))}});export{Y as default};
