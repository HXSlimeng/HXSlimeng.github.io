import{_ as l,d as a,e,g as t,f as n,c as o,b as d,F as s,r as u,u as i,t as r,w as b,x as c,y as p,o as m,n as v,p as f,a as y}from"./index.8704cb21.js";import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js";const h=l=>(f("data-v-18cfe496"),l=l(),y(),l),g=h((()=>d("button",{type:"button",class:"btn btn-primary m-3","data-bs-toggle":"modal","data-bs-target":"#dateModal"},"+",-1))),k={class:"table-responsive m-3"},x={class:"table table-sm table-bordered caption-top"},w=h((()=>d("th",{scope:"col"},"日期",-1))),M=h((()=>d("th",null,"总计",-1))),j=["onClick"],C=h((()=>d("td",null,"合计",-1))),_={class:"modal fade",id:"dateModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},E={class:"modal-dialog"},O={class:"modal-content"},L=h((()=>d("div",{class:"modal-header"},[d("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"添加日期"),d("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),T={class:"modal-body"},U=["disabled"],V={class:"input-group mb-3"},D={type:"button",class:"btn btn-outline-secondary"},I={class:"mr-3",style:{display:"inline-block","text-align":"center",width:"2em"}},J=["onUpdate:modelValue"],N={class:"modal-footer"},S=h((()=>d("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)));var B=l(a({__name:"index",setup(l){const a=e([]),f=e([{label:"吃",prop:"food",icon:"bi bi-cake2-fill"},{label:"穿",prop:"clothes",icon:"bi bi-incognito"},{label:"娱乐",prop:"entertainment",icon:"bi bi-controller"},{label:"交通",prop:"traffic",icon:"bi bi-car-front-fill"},{label:"日用",prop:"daily",icon:"bi bi-calendar"},{label:"其他",prop:"others",icon:"bi bi-alipay"}]),y=e();t((()=>{y.value=new bootstrap.Modal("#dateModal",{keyboard:!1})}));const h=n((()=>a.value.sort(((l,a)=>new Date(l.date).getTime()-new Date(a.date).getTime())))),B=e({date:null,food:null,clothes:null,entertainment:null,traffic:null,daily:null,others:null,allin:null}),F=e(!1),q=e(),z=()=>{if(!B.value.date)return;let l=G(B.value);H(l),a.value.push(l),y.value.hide()},A=()=>{F.value=!1;let l=p(a.value,q.value);l.value=G(B.value),H(l),q.value=void 0,y.value.hide()};function G(l){return JSON.parse(JSON.stringify(l))}function H(l){(l=i(l)).allin=l.allin=Object.keys(l).reduce(((a,e)=>"date"!==e&&"allin"!==e?a+l[e]:a),0)}t((function(){[["dateModal",B]].forEach((([l,a])=>{document.getElementById(l).addEventListener("hidden.bs.modal",(()=>{B.value={date:null,food:null,clothes:null,entertainment:null,traffic:null,daily:null,others:null,allin:null}}))}))}));const K=n((()=>a.value.reduce(((l,a)=>(Object.keys(l).forEach((e=>{"date"!==e&&(l[e]+=a[e])})),l)),{date:null,food:null,clothes:null,entertainment:null,traffic:null,daily:null,others:null,allin:null})));return(l,a)=>(m(),o(s,null,[g,d("div",k,[d("table",x,[d("thead",null,[d("tr",null,[w,(m(!0),o(s,null,u(f.value,(l=>(m(),o("th",null,[d("i",{class:v(l.icon),style:{color:"#0d6efd"}},null,2)])))),256)),M])]),d("tbody",null,[(m(!0),o(s,null,u(i(h),((l,a)=>(m(),o("tr",{onClick:e=>((l,a)=>{F.value=!0,B.value=G(l),q.value=a,y.value.show()})(l,a)},[d("td",null,r(l.date),1),(m(!0),o(s,null,u(f.value,((a,e)=>(m(),o("td",null,r(l[a.prop]),1)))),256)),d("td",null,r(l.allin),1)],8,j)))),256)),d("tr",null,[C,(m(!0),o(s,null,u(f.value,((l,a)=>(m(),o("td",null,r(i(K)[l.prop]),1)))),256)),d("td",null,r(i(K).allin),1)])])])]),d("div",_,[d("div",E,[d("div",O,[L,d("div",T,[b(d("input",{type:"date",class:"form-control mb-3",disabled:F.value,"onUpdate:modelValue":a[0]||(a[0]=l=>B.value.date=l)},null,8,U),[[c,B.value.date]]),(m(!0),o(s,null,u(f.value,(l=>(m(),o("div",V,[d("button",D,[d("i",{class:v(l.icon)},null,2),d("div",I,r(l.label),1)]),b(d("input",{type:"number",class:"form-control","onUpdate:modelValue":a=>B.value[l.prop]=a,"aria-label":"Text input with segmented dropdown button"},null,8,J),[[c,B.value[l.prop]]])])))),256))]),d("div",N,[S,F.value?(m(),o("button",{key:1,type:"button",class:"btn btn-primary",onClick:A},"确定")):(m(),o("button",{key:0,type:"button",class:"btn btn-primary",onClick:z},"添加"))])])])])],64))}}),[["__scopeId","data-v-18cfe496"]]);export{B as default};
