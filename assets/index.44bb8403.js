import{_ as a,d as l,x as t,e,g as n,f as o,o as s,c as i,b as d,F as r,r as u,n as c,u as p,t as b,w as m,y as v,z as y,A as h,p as f,a as g,B as x,C as k}from"./index.fc78a77b.js";import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js";import"https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js";const w=a=>(f("data-v-25779776"),a=a(),g(),a),D=w((()=>d("button",{type:"button",class:"btn btn-primary m-3","data-bs-toggle":"modal","data-bs-target":"#dateModal"},"+",-1))),_={class:"table-responsive m-3"},C={class:"table table-sm table-bordered caption-top"},j=w((()=>d("th",{scope:"col"},"日期",-1))),S=w((()=>d("th",null,"总计",-1))),M=["onClick"],O=w((()=>d("td",{class:"bg-body-secondary",style:{color:"#0a58ca"}},"合计",-1))),$={class:"bg-body-secondary",style:{color:"#0a58ca"}},T={class:"bg-body-secondary",style:{color:"#0a58ca"}},A={class:"modal fade",id:"dateModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","data-backdrop":"static","aria-hidden":"true"},B={class:"modal-dialog"},E={class:"modal-content"},I=w((()=>d("div",{class:"modal-header"},[d("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"添加日期"),d("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),U={class:"modal-body"},L=["disabled"],V={class:"input-group mb-3"},F={type:"button",class:"btn btn-outline-secondary"},J={class:"mr-3",style:{display:"inline-block","text-align":"center",width:"2em"}},N=["onUpdate:modelValue"],z={class:"modal-footer"},P=w((()=>d("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)));var X=a(l({__name:"TableData",props:{allData:null,summation:null},setup(a){const l=a,{allData:f,summation:g}=t(l),x=y("categorys"),k=e();n((()=>{k.value=new bootstrap.Modal(document.getElementById("dateModal"),{keyboard:!1})}));const w=o((()=>f.value.sort(((a,l)=>new Date(a.date).getTime()-new Date(l.date).getTime())))),X=e({date:null,food:null,clothes:null,entertainment:null,traffic:null,daily:null,others:null,allin:null}),q=e(!1),G=e(),H=()=>{if(!X.value.date)return;let a=Q(X.value);R(a),f.value.push(a),k.value.hide()},K=()=>{let a=h(f.value,G.value);a.value=Q(X.value),R(a),G.value=void 0,k.value.hide()};function Q(a){return JSON.parse(JSON.stringify(a))}function R(a){(a=p(a)).allin=a.allin=Object.keys(a).reduce(((l,t)=>"date"!==t&&"allin"!==t?l+a[t]:l),0)}return(a,l)=>(s(),i("div",null,[D,d("div",_,[d("table",C,[d("thead",null,[d("tr",null,[j,(s(!0),i(r,null,u(p(x),(a=>(s(),i("th",null,[d("i",{class:c(a.icon),style:{color:"#0d6efd"}},null,2)])))),256)),S])]),d("tbody",null,[(s(!0),i(r,null,u(p(w),((a,l)=>(s(),i("tr",{onClick:t=>((a,l)=>{q.value=!0,X.value=Q(a),G.value=l,k.value.show()})(a,l)},[d("td",null,b(a.date),1),(s(!0),i(r,null,u(p(x),((l,t)=>(s(),i("td",null,b(a[l.prop]),1)))),256)),d("td",null,b(a.allin),1)],8,M)))),256)),d("tr",null,[O,(s(!0),i(r,null,u(p(x),((a,l)=>(s(),i("td",$,b(p(g)[a.prop]),1)))),256)),d("td",T,b(p(g).allin),1)])])])]),d("div",A,[d("div",B,[d("div",E,[I,d("div",U,[m(d("input",{type:"date",class:"form-control mb-3",disabled:q.value,"onUpdate:modelValue":l[0]||(l[0]=a=>X.value.date=a)},null,8,L),[[v,X.value.date]]),(s(!0),i(r,null,u(p(x),(a=>(s(),i("div",V,[d("button",F,[d("i",{class:c(a.icon)},null,2),d("div",J,b(a.label),1)]),m(d("input",{type:"number",class:"form-control","onUpdate:modelValue":l=>X.value[a.prop]=l,"aria-label":"Text input with segmented dropdown button"},null,8,N),[[v,X.value[a.prop]]])])))),256))]),d("div",z,[P,q.value?(s(),i("button",{key:1,type:"button",class:"btn btn-primary",onClick:K},"确定")):(s(),i("button",{key:0,type:"button",class:"btn btn-primary",onClick:H},"添加"))])])])])]))}}),[["__scopeId","data-v-25779776"]]);const q=a=>(f("data-v-6432d702"),a=a(),g(),a),G=q((()=>d("div",{id:"dailySpend",class:"chart"},null,-1))),H=q((()=>d("div",{id:"typeSpend",class:"chart"},null,-1)));var K=a(l({__name:"TableCharts",props:{allData:null,summation:null},setup(a){const l=a,t=y("categorys");let e=t.map((({prop:a,label:t})=>({name:t,type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:l.allData.map((({[a]:l})=>l))}))),o=t.map((({prop:a,label:t})=>({name:t,value:l.summation[a],label:{show:!0}})));const d=[{dom:"dailySpend",ctx:null,option:{title:{text:"概览",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"0"},xAxis:{type:"category",data:l.allData.map((({date:a})=>a))},yAxis:{type:"value"},grid:{left:"3%",right:"4%",bottom:"8%",containLabel:!0},series:e}},{dom:"typeSpend",ctx:null,option:{title:{text:"类别消费统计",left:"center",top:"10%"},tooltip:{show:!0,formatter:({name:a,value:l,percent:t})=>`${a}-${l} (${t}%)`},series:[{name:"Access From",type:"pie",radius:"50%",label:{show:!0,formatter:({name:a,value:l,percent:t})=>`${a}-${l} (${t}%)`},data:o,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}];return n((()=>{d.forEach((a=>{let l=document.getElementById(a.dom);a.ctx=echarts.init(l),a.ctx.setOption(a.option,!0)}))})),(a,l)=>(s(),i(r,null,[G,H],64))}}),[["__scopeId","data-v-6432d702"]]);const Q={class:"container py-3"},R={class:"nav nav-tabs"},W=["onClick"],Y=l({__name:"index",setup(a){const l=e([]),t=o((()=>l.value.reduce(((a,l)=>(Object.keys(a).forEach((t=>{"date"!==t&&(a[t]+=l[t])})),a)),{date:null,food:null,clothes:null,entertainment:null,traffic:null,daily:null,others:null,allin:null}))),n=e([{label:"数据记录表",prop:"table"},{label:"统计",prop:"statistic"}]),m=e("table");const v=e();return k("categorys",[{label:"吃",prop:"food",icon:"bi bi-cake2-fill"},{label:"穿",prop:"clothes",icon:"bi bi-incognito"},{label:"娱乐",prop:"entertainment",icon:"bi bi-controller"},{label:"交通",prop:"traffic",icon:"bi bi-car-front-fill"},{label:"日用",prop:"daily",icon:"bi bi-calendar"},{label:"其他",prop:"others",icon:"bi bi-alipay"}]),(a,e)=>(s(),i("div",Q,[d("ul",R,[(s(!0),i(r,null,u(n.value,(a=>(s(),i("li",{class:"nav-item",onClick:l=>{return t=a.prop,void(m.value=t);var t}},[d("a",{class:c({"nav-link":!0,active:m.value==a.prop}),"aria-current":"page"},b(a.label),3)],8,W)))),256))]),"table"===m.value?(s(),x(X,{key:0,allData:l.value,"onUpdate:allData":e[0]||(e[0]=a=>l.value=a),summation:p(t),ref_key:"tableComp",ref:v},null,8,["allData","summation"])):(s(),x(K,{key:1,allData:l.value,summation:p(t)},null,8,["allData","summation"]))]))}});export{Y as default};
